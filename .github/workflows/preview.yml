name: ANLIK PÄ°YASA - OFFLINE PRO MODE

on:
  push:
    branches: [ "main" ]
  workflow_dispatch:

jobs:
  publish-preview:
    runs-on: ubuntu-latest

    steps:
      - name: ðŸ— Depoyu Ã‡ek
        uses: actions/checkout@v4

      # 1. TEMÄ°ZLÄ°K
      - name: ðŸ§¹ Derin Temizlik
        run: rm -rf node_modules package-lock.json package.json eas.json babel.config.js app.json assets metro.config.js App.js GoogleService-Info.plist credentials.json

      - name: ðŸ— Node.js Kurulumu (v20)
        uses: actions/setup-node@v4
        with:
          node-version: 20

      # 2. GÃ–RSELLERÄ° HAZIRLA
      - name: ðŸŽ¨ GÃ¶rselleri OluÅŸtur
        run: |
          sudo apt-get install imagemagick -y
          mkdir -p assets
          
          # Ä°konu Ä°ndir
          curl -L -o assets/icon.png "https://i.ibb.co/99mj6zkx/71cf52be-22d6-4382-8a4e-bb42ea43796e.png"
          
          # Gold Splash EkranÄ± Ã‡iz
          convert -size 1242x2688 xc:"#000000" \
            -fill "#F59E0B" -font DejaVu-Sans-Bold -gravity center -pointsize 100 -annotate 0 "ANLIK PÄ°YASA" \
            assets/splash.png
            
          cp assets/icon.png assets/adaptive-icon.png
          cp assets/icon.png assets/favicon.png

      # 3. PACKAGE.JSON
      - name: ðŸ“„ package.json OluÅŸtur
        run: |
          cat > package.json <<'EOF'
          {
            "name": "eminxtream",
            "version": "1.0.0",
            "main": "node_modules/expo/AppEntry.js",
            "dependencies": {
              "expo": "~54.0.0",
              "react": "19.0.0",
              "react-native": "0.78.0",
              "expo-status-bar": "~2.1.0",
              "fs-extra": "^11.2.0",
              "@expo/vector-icons": "~14.0.0",
              "react-native-safe-area-context": "4.12.0",
              "react-native-reanimated": "~3.6.1"
            },
            "devDependencies": {
              "@babel/core": "^7.25.0",
              "babel-preset-expo": "~13.0.0"
            },
            "private": true
          }
          EOF

      # 4. BABEL & METRO CONFIG
      - name: âš™ï¸ Config DosyalarÄ±
        run: |
          cat > babel.config.js <<'EOF'
          module.exports = function(api) { 
            api.cache(true); 
            return { 
              presets: ['babel-preset-expo'],
              plugins: ['react-native-reanimated/plugin']
            }; 
          };
          EOF
          cat > metro.config.js <<'EOF'
          const { getDefaultConfig } = require('expo/metro-config'); const config = getDefaultConfig(__dirname); module.exports = config;
          EOF

      # 5. APP.JS (STATÄ°K VERÄ° & GELÄ°ÅžMÄ°Åž Ã–ZELLÄ°KLER)
      - name: ðŸ“± App.js OluÅŸtur
        run: |
          cat > App.js <<'EOF'
          import React, { useState, useEffect, useRef } from 'react';
          import { 
            Text, View, FlatList, StatusBar, TouchableOpacity, 
            StyleSheet, Modal, Platform, TextInput, RefreshControl, 
            KeyboardAvoidingView, Animated, Dimensions, Appearance, ScrollView, Image
          } from 'react-native';
          import { Ionicons, FontAwesome5 } from '@expo/vector-icons';
          import { SafeAreaProvider, useSafeAreaInsets } from 'react-native-safe-area-context';

          // --- SABÄ°TLER ---
          const SCREEN_WIDTH = Dimensions.get('window').width;
          const DRAWER_WIDTH = SCREEN_WIDTH * 0.75;

          // --- STATÄ°K VERÄ° (API YERÄ°NE BURADAN OKUYACAK) ---
          const STATIC_DATA = [
              { "kod": "USD", "isim": "Amerikan DolarÄ±", "alis": "43,4902", "satis": "43,5086", "degisim": "%0,21", "durum": "yukseliste", "son_guncelleme": "22:26" },
              { "kod": "EUR", "isim": "Euro", "alis": "51,6787", "satis": "51,6907", "degisim": "%-0,73", "durum": "dususte", "son_guncelleme": "22:26" },
              { "kod": "GA", "isim": "Gram AltÄ±n", "alis": "2950,12", "satis": "2980,50", "degisim": "%0,45", "durum": "yukseliste", "son_guncelleme": "22:30" },
              { "kod": "GBP", "isim": "Ä°ngiliz Sterlini", "alis": "59,6493", "satis": "59,6879", "degisim": "%-0,59", "durum": "dususte", "son_guncelleme": "22:26" },
              { "kod": "CHF", "isim": "Ä°sviÃ§re FrangÄ±", "alis": "56,3491", "satis": "56,3948", "degisim": "%-0,59", "durum": "dususte", "son_guncelleme": "22:26" },
              { "kod": "CAD", "isim": "Kanada DolarÄ±", "alis": "32,0134", "satis": "32,0364", "degisim": "%-0,47", "durum": "dususte", "son_guncelleme": "22:26" },
              { "kod": "CEYREK", "isim": "Ã‡eyrek AltÄ±n", "alis": "4850,00", "satis": "4920,00", "degisim": "%0,10", "durum": "yukseliste", "son_guncelleme": "22:30" },
              { "kod": "RUB", "isim": "Rus Rublesi", "alis": "0,5679", "satis": "0,5779", "degisim": "%0,25", "durum": "yukseliste", "son_guncelleme": "20:37" },
              { "kod": "AED", "isim": "BAE Dirhemi", "alis": "11,8398", "satis": "11,8462", "degisim": "%0,21", "durum": "yukseliste", "son_guncelleme": "22:26" },
              { "kod": "AUD", "isim": "Avustralya DolarÄ±", "alis": "30,3431", "satis": "30,3690", "degisim": "%-0,75", "durum": "dususte", "son_guncelleme": "22:26" },
              { "kod": "DKK", "isim": "Danimarka Kronu", "alis": "6,9133", "satis": "6,9180", "degisim": "%-0,57", "durum": "dususte", "son_guncelleme": "22:26" },
              { "kod": "SEK", "isim": "Ä°sveÃ§ Kronu", "alis": "4,8962", "satis": "4,9006", "degisim": "%-0,65", "durum": "dususte", "son_guncelleme": "22:26" },
              { "kod": "NOK", "isim": "NorveÃ§ Kronu", "alis": "4,5234", "satis": "4,5283", "degisim": "%-0,54", "durum": "dususte", "son_guncelleme": "22:26" },
              { "kod": "JPY", "isim": "Japon Yeni", "alis": "0,2811", "satis": "0,2822", "degisim": "%-0,88", "durum": "dususte", "son_guncelleme": "22:25" },
              { "kod": "KWD", "isim": "Kuveyt DinarÄ±", "alis": "141,5350", "satis": "142,0451", "degisim": "%0,09", "durum": "yukseliste", "son_guncelleme": "22:04" },
              { "kod": "ZAR", "isim": "GÃ¼ney Afrika RandÄ±", "alis": "2,7003", "satis": "2,7026", "degisim": "%-2,06", "durum": "dususte", "son_guncelleme": "22:26" },
              { "kod": "SAR", "isim": "Suudi Arabistan Riyali", "alis": "11,5819", "satis": "11,6132", "degisim": "%0,21", "durum": "yukseliste", "son_guncelleme": "22:26" },
              { "kod": "CNY", "isim": "Ã‡in YuanÄ±", "alis": "6,2500", "satis": "6,2538", "degisim": "%0,07", "durum": "yukseliste", "son_guncelleme": "22:26" },
              { "kod": "AZN", "isim": "Azerbaycan ManatÄ±", "alis": "25,5825", "satis": "25,5933", "degisim": "%0,21", "durum": "yukseliste", "son_guncelleme": "22:26" }
          ];

          // --- DÄ°L PAKETÄ° ---
          const LANG = {
            tr: {
              buy: "AlÄ±ÅŸ",
              sell: "SatÄ±ÅŸ",
              calc: "Hesapla",
              amount: "Miktar",
              settings: "Ayarlar",
              theme: "Tema",
              language: "Dil",
              auto: "Otomatik",
              dark: "KaranlÄ±k",
              light: "AydÄ±nlÄ±k",
              close: "Kapat",
              adSpace: "REKLAM ALANI",
              bannerPlace: "BANNER REKLAM YERÄ°",
              calcTitle: "DÃ¶viz HesaplayÄ±cÄ±",
              lastUpdate: "Son GÃ¼ncelleme",
              appPref: "Uygulama Tercihleri",
              version: "SÃ¼rÃ¼m"
            },
            en: {
              buy: "Buy",
              sell: "Sell",
              calc: "Calculate",
              amount: "Amount",
              settings: "Settings",
              theme: "Theme",
              language: "Language",
              auto: "Auto",
              dark: "Dark",
              light: "Light",
              close: "Close",
              adSpace: "AD SPACE",
              bannerPlace: "BANNER AD PLACE",
              calcTitle: "Currency Calculator",
              lastUpdate: "Last Update",
              appPref: "App Preferences",
              version: "Version"
            }
          };

          function MainApp() {
            const insets = useSafeAreaInsets();
            const colorScheme = Appearance.getColorScheme();
            
            // State
            const [data, setData] = useState([]);
            const [refreshing, setRefreshing] = useState(false);
            
            // Ayarlar State'i
            const [themeMode, setThemeMode] = useState('auto'); // 'auto', 'dark', 'light'
            const [language, setLanguage] = useState('tr'); // 'tr', 'en'
            const [menuOpen, setMenuOpen] = useState(false);
            
            // Animasyonlar
            const slideAnim = useRef(new Animated.Value(-DRAWER_WIDTH)).current;
            const fadeAnim = useRef(new Animated.Value(0)).current;

            // Hesap Makinesi
            const [calcVisible, setCalcVisible] = useState(false);
            const [selectedItem, setSelectedItem] = useState(null);
            const [amount, setAmount] = useState('');
            const [calcResult, setCalcResult] = useState(null);

            // Tema Belirleme
            const isDarkMode = themeMode === 'auto' ? colorScheme === 'dark' : themeMode === 'dark';
            const T = LANG[language];

            const theme = isDarkMode ? {
              bg: '#000000',
              surface: '#1C1C1E',
              card: '#1C1C1E',
              text: '#FFFFFF',
              subText: '#8E8E93',
              gold: '#FFD60A',
              green: '#30D158',
              red: '#FF453A',
              border: '#38383A',
              modal: '#2C2C2E',
              input: '#2C2C2E',
              tint: 'rgba(255,255,255,0.1)'
            } : {
              bg: '#F2F2F7',
              surface: '#FFFFFF',
              card: '#FFFFFF',
              text: '#000000',
              subText: '#8E8E93',
              gold: '#FF9500',
              green: '#34C759',
              red: '#FF3B30',
              border: '#E5E5EA',
              modal: '#FFFFFF',
              input: '#F2F2F7',
              tint: 'rgba(0,0,0,0.05)'
            };

            // MenÃ¼ Animasyonu
            useEffect(() => {
              Animated.parallel([
                Animated.timing(slideAnim, { toValue: menuOpen ? 0 : -DRAWER_WIDTH, duration: 300, useNativeDriver: true }),
                Animated.timing(fadeAnim, { toValue: menuOpen ? 1 : 0, duration: 300, useNativeDriver: true })
              ]).start();
            }, [menuOpen]);

            // VERÄ° YÃœKLEME (ArtÄ±k Statik)
            const loadData = () => {
              // SimÃ¼le edilmiÅŸ bir yÃ¼kleme sÃ¼resi (kullanÄ±cÄ± yenilendiÄŸini hissetsin)
              setTimeout(() => {
                setData(STATIC_DATA);
                setRefreshing(false);
              }, 500);
            };

            useEffect(() => { loadData(); }, []);
            const onRefresh = () => { setRefreshing(true); loadData(); };

            const openCalculator = (item) => {
              setSelectedItem(item); setAmount(''); setCalcResult(null); setCalcVisible(true);
            };

            const handleCalculate = (text) => {
              setAmount(text);
              if (selectedItem && text) {
                const val = parseFloat(text.replace(',', '.'));
                const p = parseFloat(selectedItem.satis.replace(',', '.').replace('.', '')); // Binlik ayracÄ± temizliÄŸi gerekebilir ama basit tutuyoruz
                // Basit parse: VirgÃ¼lÃ¼ noktaya Ã§evir
                const simplePrice = parseFloat(selectedItem.satis.replace(',', '.'));
                if (!isNaN(val)) setCalcResult((val * simplePrice).toFixed(2));
              }
            };

            // Ä°KON BELÄ°RLEME (AltÄ±n vs DÃ¶viz)
            const getIcon = (item) => {
               const name = item.isim.toLowerCase();
               const code = item.kod.toLowerCase();
               
               if (name.includes('altÄ±n') || name.includes('gold') || code === 'ga' || code === 'ceyrek') {
                 return <FontAwesome5 name="coins" size={20} color={theme.gold} />;
               }
               // DÃ¶viz sembolleri
               if(code === 'usd') return <FontAwesome5 name="dollar-sign" size={20} color={theme.green} />;
               if(code === 'eur') return <FontAwesome5 name="euro-sign" size={20} color={theme.text} />;
               if(code === 'gbp') return <FontAwesome5 name="pound-sign" size={20} color={theme.text} />;
               if(code === 'jpy') return <FontAwesome5 name="yen-sign" size={20} color={theme.text} />;
               if(code === 'rub') return <FontAwesome5 name="ruble-sign" size={20} color={theme.text} />;
               
               return <Text style={{fontSize:16, fontWeight:'800', color: theme.subText}}>{item.kod.charAt(0)}</Text>;
            };

            const renderItem = ({ item }) => {
              // Duruma gÃ¶re ok belirleme (JSON'dan geliyor)
              const isUp = item.durum === 'yukseliste';
              const isDown = item.durum === 'dususte';
              const trendIcon = isUp ? 'caret-up' : (isDown ? 'caret-down' : 'remove-outline');
              const trendColor = isUp ? theme.green : (isDown ? theme.red : theme.subText);

              return (
                <TouchableOpacity onPress={() => openCalculator(item)} activeOpacity={0.7}>
                  <View style={[styles.card, { backgroundColor: theme.card, shadowColor: theme.text }]}>
                    <View style={{flexDirection:'row', alignItems:'center'}}>
                       <View style={[styles.iconBox, { backgroundColor: theme.tint }]}>
                          {getIcon(item)}
                       </View>
                       <View style={{marginLeft: 12}}>
                          <Text style={{color: theme.text, fontWeight:'700', fontSize:16}}>{item.kod}</Text>
                          <Text style={{color: theme.subText, fontSize:12, marginTop:2}}>{item.isim}</Text>
                       </View>
                    </View>
                    <View style={{alignItems:'flex-end'}}>
                       <View style={{flexDirection:'row', alignItems:'center'}}>
                          <Text style={{color: theme.text, fontSize:18, fontWeight:'700', marginRight:6, fontVariant: ['tabular-nums']}}>{item.satis}</Text>
                          {/* OKLAR ARTIK HER ZAMAN GÃ–RÃœNÃœR */}
                          <Ionicons name={trendIcon} size={18} color={trendColor} />
                       </View>
                       <View style={{flexDirection:'row', marginTop:2}}>
                          <Text style={{color: theme.subText, fontSize:11, marginRight:8}}>{T.buy}: {item.alis}</Text>
                          <Text style={{color: trendColor, fontSize:11, fontWeight:'bold'}}>{item.degisim}</Text>
                       </View>
                    </View>
                  </View>
                </TouchableOpacity>
              );
            };

            return (
              <View style={[styles.container, { backgroundColor: theme.bg }]}>
                <StatusBar barStyle={isDarkMode ? "light-content" : "dark-content"} />
                
                {/* HEADER */}
                <View style={[styles.header, { paddingTop: insets.top + 10, backgroundColor: theme.surface, borderBottomColor: theme.border }]}>
                   <TouchableOpacity onPress={() => setMenuOpen(true)} style={styles.headerBtn}>
                      <Ionicons name="menu" size={28} color={theme.gold} />
                   </TouchableOpacity>
                   <Text style={[styles.title, { color: theme.text }]}>ANLIK <Text style={{color: theme.gold}}>PÄ°YASA</Text></Text>
                   <View style={styles.headerBtn} /> 
                </View>

                {/* LISTE */}
                <FlatList
                  data={data} 
                  keyExtractor={item => item.kod} 
                  renderItem={renderItem}
                  refreshControl={<RefreshControl refreshing={refreshing} onRefresh={onRefresh} tintColor={theme.gold} />}
                  contentContainerStyle={{paddingTop: 15, paddingBottom: 100}}
                  ItemSeparatorComponent={() => <View style={{height: 10}} />}
                />

                {/* BANNER */}
                <View style={[styles.bannerContainer, { paddingBottom: insets.bottom + 10, backgroundColor: theme.surface, borderTopColor: theme.border }]}>
                  <Text style={{color: theme.subText, fontSize:9, marginBottom:4, letterSpacing:1}}>{T.adSpace}</Text>
                  <View style={[styles.bannerBox, { backgroundColor: theme.tint, borderColor: theme.border }]}>
                     <Text style={{color: theme.gold, fontWeight:'600', fontSize:12}}>{T.bannerPlace}</Text>
                  </View>
                </View>

                {/* --- SIDE MENU (DRAWER) --- */}
                {menuOpen && (
                  <Animated.View style={[styles.menuOverlay, { opacity: fadeAnim }]}>
                    <TouchableOpacity style={{flex:1}} onPress={() => setMenuOpen(false)} activeOpacity={1} />
                  </Animated.View>
                )}
                
                <Animated.View style={[styles.drawer, { 
                    width: DRAWER_WIDTH, 
                    backgroundColor: theme.surface, 
                    transform: [{ translateX: slideAnim }],
                    paddingTop: insets.top + 20
                }]}>
                   <View style={{paddingHorizontal: 20, marginBottom: 30}}>
                      <Text style={{fontSize: 26, fontWeight: '800', color: theme.text}}>{T.settings}</Text>
                      <Text style={{fontSize: 14, color: theme.subText, marginTop: 5}}>{T.appPref}</Text>
                   </View>

                   <ScrollView style={{flex:1}}>
                      {/* TEMA AYARLARI */}
                      <View style={styles.menuSection}>
                         <Text style={[styles.menuHeader, {color: theme.subText}]}>{T.theme.toUpperCase()}</Text>
                         {['auto', 'light', 'dark'].map((m) => (
                           <TouchableOpacity key={m} onPress={() => setThemeMode(m)} style={[styles.menuItem, {borderBottomColor: theme.border}]}>
                              <Text style={{color: theme.text, fontSize:16, textTransform:'capitalize'}}>{T[m]}</Text>
                              {themeMode === m && <Ionicons name="checkmark" size={22} color={theme.gold} />}
                           </TouchableOpacity>
                         ))}
                      </View>

                      {/* DÄ°L AYARLARI */}
                      <View style={styles.menuSection}>
                         <Text style={[styles.menuHeader, {color: theme.subText}]}>{T.language.toUpperCase()}</Text>
                         {['tr', 'en'].map((l) => (
                           <TouchableOpacity key={l} onPress={() => setLanguage(l)} style={[styles.menuItem, {borderBottomColor: theme.border}]}>
                              <Text style={{color: theme.text, fontSize:16}}>{l === 'tr' ? 'TÃ¼rkÃ§e' : 'English'}</Text>
                              {language === l && <Ionicons name="checkmark" size={22} color={theme.gold} />}
                           </TouchableOpacity>
                         ))}
                      </View>
                   </ScrollView>
                   
                   <View style={{padding: 20, paddingBottom: insets.bottom + 20}}>
                      <Text style={{color: theme.subText, fontSize: 12, textAlign:'center'}}>v1.0.0 â€¢ EminXtream</Text>
                   </View>
                </Animated.View>

                {/* HESAP MAKÄ°NESÄ° MODAL */}
                <Modal visible={calcVisible} transparent={true} animationType="slide" onRequestClose={() => setCalcVisible(false)}>
                  <KeyboardAvoidingView behavior={Platform.OS === "ios" ? "padding" : "height"} style={styles.modalOverlay}>
                    <TouchableOpacity style={{flex:1, justifyContent:'flex-end'}} activeOpacity={1} onPress={() => setCalcVisible(false)}>
                       <TouchableOpacity activeOpacity={1} style={[styles.calcContent, { backgroundColor: theme.modal, paddingBottom: insets.bottom + 20 }]}>
                          <View style={styles.dragHandle} />
                          <View style={{flexDirection:'row', justifyContent:'space-between', alignItems:'center', marginBottom:20}}>
                             <Text style={{color:theme.text, fontSize:20, fontWeight:'700'}}>{T.calcTitle}</Text>
                             <TouchableOpacity onPress={() => setCalcVisible(false)} style={{padding:5, backgroundColor: theme.tint, borderRadius:20}}>
                               <Ionicons name="close" size={20} color={theme.subText} />
                             </TouchableOpacity>
                          </View>
                          
                          <View style={{alignItems:'center', marginBottom:20}}>
                             <Text style={{color: theme.subText, fontSize:14}}>{selectedItem?.isim}</Text>
                             <Text style={{color: theme.gold, fontSize:32, fontWeight:'800', marginVertical:5}}>{selectedItem?.satis} â‚º</Text>
                          </View>

                          <TextInput 
                             style={[styles.input, { backgroundColor: theme.input, color: theme.text }]}
                             placeholder={T.amount} placeholderTextColor={theme.subText} keyboardType="numeric"
                             value={amount} onChangeText={handleCalculate} autoFocus={true}
                          />
                          
                          {calcResult && (
                             <View style={{marginTop:20, padding:16, backgroundColor: theme.green, borderRadius:16, alignItems:'center', shadowColor: theme.green, shadowOpacity:0.3, shadowRadius:10, shadowOffset:{width:0, height:4}}}>
                                <Text style={{color:'#FFF', fontSize:28, fontWeight:'800'}}>{calcResult} â‚º</Text>
                             </View>
                          )}
                       </TouchableOpacity>
                    </TouchableOpacity>
                  </KeyboardAvoidingView>
                </Modal>
              </View>
            );
          }
          export default function App() { return <SafeAreaProvider><MainApp /></SafeAreaProvider>; }
          
          const styles = StyleSheet.create({
            container: { flex: 1 }, 
            header: { flexDirection: 'row', justifyContent: 'space-between', alignItems: 'center', paddingHorizontal: 16, paddingBottom: 12, borderBottomWidth: 0.5, zIndex: 1 },
            headerBtn: { width: 40, height: 40, justifyContent:'center', alignItems:'center' },
            title: { fontSize: 20, fontWeight: '800', letterSpacing: 0.5 },
            card: { flexDirection: 'row', justifyContent: 'space-between', padding: 16, marginHorizontal: 16, borderRadius: 16, shadowOpacity: 0.05, shadowRadius: 5, shadowOffset: {width:0, height:2}, elevation: 2 },
            iconBox: { width: 44, height: 44, borderRadius: 22, justifyContent:'center', alignItems:'center' },
            bannerContainer: { alignItems:'center', borderTopWidth:0.5, padding: 10 },
            bannerBox: { width: 320, height: 50, borderWidth:1, borderStyle:'dashed', justifyContent:'center', alignItems:'center', borderRadius:12 },
            
            // Drawer Styles
            menuOverlay: { position: 'absolute', top: 0, left: 0, right: 0, bottom: 0, backgroundColor: 'rgba(0,0,0,0.5)', zIndex: 10 },
            drawer: { position: 'absolute', top: 0, bottom: 0, left: 0, zIndex: 11, shadowColor: "#000", shadowOffset: { width: 5, height: 0 }, shadowOpacity: 0.2, shadowRadius: 10, elevation: 20 },
            menuSection: { marginTop: 20, paddingHorizontal: 20 },
            menuHeader: { fontSize: 12, fontWeight: '700', marginBottom: 8, letterSpacing: 1 },
            menuItem: { flexDirection: 'row', justifyContent: 'space-between', alignItems: 'center', paddingVertical: 14, borderBottomWidth: 0.5 },

            // Modal Styles
            modalOverlay: { flex: 1, backgroundColor: 'rgba(0,0,0,0.6)', justifyContent: 'flex-end' },
            calcContent: { width: '100%', padding: 24, borderTopLeftRadius: 32, borderTopRightRadius: 32 },
            dragHandle: { width: 40, height: 5, backgroundColor: '#CCC', borderRadius: 3, alignSelf: 'center', marginBottom: 20, opacity: 0.5 },
            input: { height: 56, borderRadius: 16, paddingHorizontal: 20, fontSize: 20, fontWeight:'600' },
          });
          EOF

      # 6. APP.JSON
      - name: ðŸ“„ app.json OluÅŸtur
        run: |
          cat > app.json <<'EOF'
          {
            "expo": {
              "name": "ANLIK PÄ°YASA",
              "slug": "eminxtream",
              "version": "1.0.0",
              "orientation": "portrait",
              "userInterfaceStyle": "automatic",
              "icon": "./assets/icon.png",
              "splash": {
                "image": "./assets/splash.png",
                "resizeMode": "contain",
                "backgroundColor": "#000000"
              },
              "ios": {
                "bundleIdentifier": "com.piyasapro.app",
                "supportsTablet": true,
                "infoPlist": {
                  "NSAppTransportSecurity": { "NSAllowsArbitraryLoads": true }
                }
              },
              "android": {
                "package": "com.piyasapro.app",
                "adaptiveIcon": {
                  "foregroundImage": "./assets/adaptive-icon.png",
                  "backgroundColor": "#000000"
                }
              },
              "updates": { "url": "https://u.expo.dev/7b7866e2-688e-4e87-af97-88213b2670d4" },
              "runtimeVersion": { "policy": "appVersion" },
              "extra": { "eas": { "projectId": "7b7866e2-688e-4e87-af97-88213b2670d4" } }
            }
          }
          EOF

      - name: ðŸ“¦ Paket Kurulumu
        run: |
          npm install -g eas-cli
          npm install --legacy-peer-deps

      - name: ðŸš€ GÃ¼ncelle (Update)
        env:
          EXPO_TOKEN: ${{ secrets.EXPO_TOKEN }}
        run: |
          eas update --branch preview --message "Offline Mode: Static Data + Trend Fix" --non-interactive
